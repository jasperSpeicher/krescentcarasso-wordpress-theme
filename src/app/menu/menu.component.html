<div [ngClass]="headerClasses"
     [style.display]="{ none: menu==null, block: menu!=null }">

  <div class="container-fluid">

    <ul class="theme-menu">
      <li *ngFor="let parent of menu?.items">

        <a *ngIf="parent.object==='custom'"
           (click)="showChildren(parent)"
           [class.active]="menu.activeParent === parent.object_slug"
           [class.child-active]="menu.activeParent === parent.object_slug">
          {{ parent.title }}
        </a>
        <a class="page-link" *ngIf="parent.object==='page'"
           routerLink="{{ path(parent.object_slug) }}" routerLinkActive="active">
          {{ parent.title }}
        </a>

        <div>

          <!-- text based for mobile -->
          <ul [class.active]="menu.activeParent === parent.object_slug">

            <!-- show child links if not on explore page -->
            <template [ngIf]="parent.object_slug!=='explore'">
              <li *ngFor="let child of parent.children">
                <a routerLink="{{ path(parent.object_slug,child.object_slug) }}" routerLinkActive="active">
                  {{ child.title }}
                </a>
              </li>
            </template>

            <!-- show gallery category terms if on explore page -->
            <template [ngIf]="parent.object_slug==='explore'">
              <li *ngFor="let term of menu.mediaCategoryTerms">
                <a routerLink="{{ path(parent.object_slug,term.slug) }}" routerLinkActive="active">
                  {{ term.name }}
                </a>
              </li>
            </template>

          </ul>

          <!-- image based for desktop -->
          <div class="image-grid container-fluid" [class.active]="menu.activeParent === parent.object_slug">
            <div class="row d-none d-sm-block" [class.active]="menu.activeParent === parent.object_slug">

              <div class="image-grid__item col-12" *ngFor="let child of parent.children"
                   [ngClass]="{'col-sm-4':parent.children.length>2, 'col-sm-6':parent.children.length<=2}">
                <a class="image-grid__project-link" routerLink="{{ path(parent.object_slug,child.object_slug) }}"
                   routerLinkActive="active">
                  <template [ngIf]="!!child.gridImage">
                    <img [src]="child.gridImage"/>
                  </template>
                  <div class="image-grid__item-title">{{ child.title }}</div>
                </a>
              </div>

            </div>
          </div>

        </div>

      </li>
    </ul>

  </div>

  <h1>
    <a routerLink="/">
      <ng-content></ng-content>
    </a>
    <a class="menu-toggle" (click)="menuVisible=!menuVisible">+</a>
  </h1>

</div>
